<overrides>

	<file name=".*WEB-INF/config\.xml">
		<replaceXML xpath="resources">
			<resource enabled="true">
      	<name>main-db</name>
      	<provider>jeeves.resources.dbms.JNDIPool</provider>
      	<config>
        	<context>java:/comp/env</context>
        	<resourceName>jdbc/geonetwork</resourceName>
  <!-- Place ga db URL here - gn really only needs to know what type of db it is using, so doesn't need
	     to be a real URL - rest of the db info comes from tomcat -->
        	<url>jdbc:oracle:thin:@dm02-scan.prod.lan:7381/oradev</url>
        	<provideDataStore>true</provideDataStore>
        	<maxOpenPreparedStatements>300</maxOpenPreparedStatements>
      	</config>
    	</resource>
		</replaceXML>
	</file>

  <!-- add ldap settings in config-security-ldap.xml -->
  <spring>
    <import file="WEB-INF/config-security-ldap.xml"/>
    <!-- Apply a customised ldapAuthProvider bean to work with AD.  User's DN is retrieved from the 
         sAMAccountName attribute in the Users AD object.  Instead of setting the userDnPatterns property, 
         the userSearch property is initialised with a FilterBasedLdapUserSearch bean. -->
    <import file="WEB-INF/config-ldap-ga-ldapAuthProvider.xml"/>
  </spring>

	<!-- add ga description to the strings file - modify as required -->
	<file name=".*geonetwork/loc/eng/xml/strings\.xml">
		<replaceXML xpath="welcome.text">
     <!-- GA Home Text-->
<h4>Welcome to eCat</h4>
<p>eCat is the central, searchable repository for dataset descriptions (metadata) relating to data held by GA in Australia.</p>
		</replaceXML>
    <replaceXML xpath="about.text">
        <!--About eCat-->
        <h4>About eCat</h4>
<p>eCat the central, searchable repository for dataset descriptions (metadata) relating to data held by GA in Australia.</p>
<p>The following links are supplied for eCat users:             
<ul>
<li><b>Catalog:</b> provides both simple free text search and keyword-based filtering (default), plus advanced options to search for metadata
</li>
<li><b>Map:</b> Nationalmap interface that can display maps from GeoNetwork search results, using the green "add to map" buttons or just display and preview web maps from webservices.
</li>
<li><b>About:</b> contains some background information about the present version of eCat
</li>
<li><b>Home:</b> takes you back to this page.
</li>                               
<li>Registered users should <b>Sign In</b> via the link above the GeoNetwork logo to view internal records and/or to create and edit metadata.
</li>                               
</ul>                
</p>
<p>For more information about the GeoNetwork Open Source product on which this version of eCat is built, see the <a href="http://geonetwork-opensource.org/">GeoNetwork project home page</a>. To contact the eCat development team to request new features or report problems, please use the email <a href="mailto:eCatSupport@ga.gov.au">eCatSupport@ga.gov.au</a>.</p>
    </replaceXML>
	</file>
	<!-- Add geoserver layers for maps in classic interface only -->
	<file name=".*WEB-INF/config-gui\.xml">
		<!-- set server to use geoserver -->
		<replaceAtt xpath="mapViewer/layers/layer" attName="server" value="http://localhost:8080/geoserver/wms" />
		<!-- switch off OSM in html5ui etc -->
		<replaceXML xpath="map/osm_map"/>
		<addXML xpath="">
			<!-- NICTA National Map config
			     proxyDomains: means use nationalmap corsProxy on these domains 
			     corsProxyHost: URL of corsProxy host - best if it runs on localhost 
					 disableCorsProxy: set to false on platforms that can use nationalmap server.js + varnish,
					               true means everything will go through proxyHost (GeoNetwork)
			     proxyHost: URL of GeoNetwork proxy - used for all domains not handled by corsProxyHost 
					 baseLayer: imagery to display as base layer in national map, types accepted are
					            wms and bingmaps

											eg. for bing maps:

											"type": "bingmaps"
											"options": {
											   "url" : "//dev.virtualearth.net",
											},
			 -->
			<nationalmap>
			{
			    "corsDomains" : [
						"nicta.com.au",
						"gov.au",
						"arcgis.com"
					],
					"corsProxyHost"    :  "http://localhost:3001",
					"disableCorsProxy" :  "true",
					"proxyHost"        :  "../../proxy/",
					"baseLayer"        : {
						     "type" : "wms",
						     "options" : {
								 			
							        "layers" : "ea-be:World_Bright-Earth-e-Atlas-basemap_No-Labels",
							        "url"    : "http://www.cmar.csiro.au/geoserver/gwc/service/wms"
						     }
					},
					"terrainProvider" : {
						"options" : {
							"url"    : "//cesiumjs.org/stk-terrain/tilesets/world/tiles"
						}
					}
			}
			</nationalmap>
		</addXML>
	</file>
</overrides>
